<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>COM-SERVE Funeral Payment Tracking</title>
  <style>/* ==== DARK THEME BASE ==== */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
:root {
  --bg-color: #121212;
  --card-bg: #1e1e1e;
  --text-color: #e0e0e0;
  --accent-color: #4caf50;
  --accent-hover: #66bb6a;
  --shadow-color: rgba(0, 0, 0, 0.7);
  --border-radius: 12px;
  --transition-speed: 0.3s;
}
* {
  box-sizing: border-box;
}
body {
  font-family: 'Inter', sans-serif;
  background-color: var(--bg-color);
  color: var(--text-color);
  margin: 0;
  line-height: 1.6;
  overflow-y: scroll;
}
a {
  color: var(--accent-color);
  text-decoration: none;
  transition: color var(--transition-speed);
}
a:hover {
  color: var(--accent-hover);
}
h1, h2, h3, h4 {
  margin: 0 0 0.5rem 0;
  font-weight: 600;
}
p {
  margin: 0 0 1rem 0;
}

/* ==== NAVIGATION TABS ==== */
nav {
  background-color: var(--card-bg);
  display: flex;
  justify-content: center;
  padding: 1rem 0;
  box-shadow: 0 2px 5px var(--shadow-color);
  position: sticky;
  top: 0;
  z-index: 1000;
}
nav button {
  background: none;
  border: none;
  color: var(--text-color);
  font-size: 1rem;
  margin: 0 1rem;
  padding: 0.5rem 1rem;
  cursor: pointer;
  border-radius: var(--border-radius);
  transition: background-color var(--transition-speed), color var(--transition-speed);
  position: relative;
  overflow: hidden;
}
nav button::after {
  content: '';
  position: absolute;
  left: 50%;
  bottom: 0;
  width: 0;
  height: 3px;
  background: var(--accent-color);
  transition: width 0.3s ease, left 0.3s ease;
  border-radius: 3px 3px 0 0;
}
nav button:hover::after,
nav button.active::after {
  width: 100%;
  left: 0;
}
nav button:hover,
nav button.active {
  background-color: var(--accent-color);
  color: #121212;
}

/* ==== MAIN CONTAINER ==== */
main {
  max-width: 1200px;
  margin: 2rem auto;
  padding: 0 1rem;
}

/* ==== CARD STYLE ==== */
.card {
  background-color: var(--card-bg);
  border-radius: var(--border-radius);
  box-shadow: 0 4px 8px var(--shadow-color);
  padding: 1.5rem;
  margin-bottom: 2rem;
  transition: transform var(--transition-speed), box-shadow var(--transition-speed);
}
.card:hover {
  transform: translateY(-5px);
  box-shadow:
    0 10px 20px rgba(76, 175, 80, 0.3),
    0 4px 8px var(--shadow-color);
}

/* ==== HOUSEHOLD DASHBOARD ==== */
#household-dashboard {
  display: none;
}
.dashboard-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 2rem;
}
.wallet-balance {
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--accent-color);
}
.status-indicator {
  display: inline-block;
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background-color: var(--accent-color);
  margin-right: 0.5rem;
  vertical-align: middle;
}

/* ==== TABLES ==== */
table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  border-radius: var(--border-radius);
  overflow: hidden;
  margin-top: 1rem;
  color: var(--text-color);
}
thead tr {
  background-color: #262626;
  position: sticky;
  top: 0;
  z-index: 10;
}
tbody tr:nth-child(odd) {
  background-color: #1a1a1a;
}
tbody tr:nth-child(even) {
  background-color: #222;
}
tbody tr:hover {
  background-color: #333;
  cursor: pointer;
}
th, td {
  padding: 0.75rem 1rem;
  border-bottom: 1px solid #333;
  text-align: left;
  font-size: 0.9rem;
  user-select: none;
}

/* ==== MODAL ==== */
.modal {
  display: none;
  position: fixed;
  z-index: 1500;
  left: 0;
  top: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.75);
  justify-content: center;
  align-items: center;
  padding: 1rem;
  animation-fill-mode: forwards;
}
.modal.active {
  display: flex;
  animation: fadeIn 0.3s ease forwards;
}
.modal-content {
  background-color: var(--card-bg);
  border-radius: var(--border-radius);
  max-width: 600px;
  width: 100%;
  padding: 2rem;
  box-shadow: 0 8px 16px var(--shadow-color);
  position: relative;
}
.modal-close {
  position: absolute;
  right: 1rem;
  top: 1rem;
  font-size: 1.5rem;
  color: var(--text-color);
  cursor: pointer;
  background: none;
  border: none;
}

/* ==== BUTTONS ==== */
button.primary {
  background-color: var(--accent-color);
  color: #121212;
  border: none;
  padding: 0.6rem 1.2rem;
  border-radius: var(--border-radius);
  cursor: pointer;
  font-weight: 600;
  transition: background-color var(--transition-speed);
}
button.primary:hover {
  background-color: var(--accent-hover);
}
button.primary:active {
  transform: scale(0.95);
}

/* ==== FORM CONTROLS ==== */
input[type="text"],
input[type="number"],
select,
input[type="search"] {
  width: 100%;
  padding: 0.5rem 0.75rem;
  border: 1px solid #333;
  border-radius: var(--border-radius);
  background-color: #181818;
  color: var(--text-color);
  font-size: 1rem;
  transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
  margin-bottom: 1rem;
}
input[type="text"]:focus,
input[type="number"]:focus,
select:focus,
input[type="search"]:focus {
  outline: none;
  border-color: var(--accent-color);
  box-shadow: 0 0 5px var(--accent-color);
}

/* ==== SCROLLBAR ==== */
::-webkit-scrollbar {
  width: 10px;
}
::-webkit-scrollbar-track {
  background: #1e1e1e;
}
::-webkit-scrollbar-thumb {
  background: var(--accent-color);
  border-radius: 10px;
}

/* ==== ANIMATIONS ==== */
@keyframes fadeIn {
  from {opacity: 0;}
  to {opacity: 1;}
}

/* ==== RESPONSIVE ==== */
@media (max-width: 768px) {
  .dashboard-grid {
    grid-template-columns: 1fr;
  }
  nav {
    flex-wrap: wrap;
  }
  nav button {
    margin: 0.5rem;
    flex: 1 1 40%;
  }
}

/* ==== ADMIN LOGS ==== */
#logs {
  font-family: monospace;
  white-space: pre-wrap;
  color: #a5d6a7;
  max-height: 150px;
  overflow-y: auto;
  background: #2a2a2a;
  padding: 1rem;
  border-radius: var(--border-radius);
}

/* ==== SCREEN READER ONLY ==== */
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  border: 0 !important;
}

    /* ==== DARK THEME BASE ==== */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
    :root {
      --bg-color: #121212;
      --card-bg: #1e1e1e;
      --text-color: #e0e0e0;
      --accent-color: #4caf50;
      --accent-hover: #66bb6a;
      --shadow-color: rgba(0, 0, 0, 0.7);
      --border-radius: 12px;
      --transition-speed: 0.3s;
    }
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      margin: 0;
      line-height: 1.6;
      overflow-y: scroll;
    }
    a {
      color: var(--accent-color);
      text-decoration: none;
      transition: color var(--transition-speed);
    }
    a:hover {
      color: var(--accent-hover);
    }
    h1,h2,h3,h4 {
      margin: 0 0 0.5rem 0;
      font-weight: 600;
    }
    p {
      margin: 0 0 1rem 0;
    }

    /* ==== NAVIGATION TABS ==== */
    nav {
      background-color: var(--card-bg);
      display: flex;
      justify-content: center;
      padding: 1rem 0;
      box-shadow: 0 2px 5px var(--shadow-color);
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    nav button {
      background: none;
      border: none;
      color: var(--text-color);
      font-size: 1rem;
      margin: 0 1rem;
      padding: 0.5rem 1rem;
      cursor: pointer;
      border-radius: var(--border-radius);
      transition: background-color var(--transition-speed), color var(--transition-speed);
    }
    nav button:hover,
    nav button.active {
      background-color: var(--accent-color);
      color: #121212;
    }

    /* ==== MAIN CONTAINER ==== */
    main {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 0 1rem;
    }

    /* ==== CARD STYLE ==== */
    .card {
      background-color: var(--card-bg);
      border-radius: var(--border-radius);
      box-shadow: 0 4px 8px var(--shadow-color);
      padding: 1.5rem;
      margin-bottom: 2rem;
      transition: transform var(--transition-speed);
    }
    .card:hover {
      transform: translateY(-5px);
    }

    /* ==== HOUSEHOLD DASHBOARD ==== */
    #household-dashboard {
      display: none;
    }
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 2rem;
    }
    .wallet-balance {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--accent-color);
    }
    .status-indicator {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background-color: var(--accent-color);
      margin-right: 0.5rem;
      vertical-align: middle;
    }

    /* ==== TABLES ==== */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
      color: var(--text-color);
    }
    thead {
      background-color: #2a2a2a;
    }
    th, td {
      padding: 0.75rem 1rem;
      border-bottom: 1px solid #333;
      text-align: left;
      font-size: 0.9rem;
    }
    tbody tr:hover {
      background-color: #333;
      cursor: default;
    }

    /* ==== MODAL ==== */
    .modal {
      display: none;
      position: fixed;
      z-index: 1500;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.75);
      justify-content: center;
      align-items: center;
      padding: 1rem;
    }
    .modal.active {
      display: flex;
    }
    .modal-content {
      background-color: var(--card-bg);
      border-radius: var(--border-radius);
      max-width: 600px;
      width: 100%;
      padding: 2rem;
      box-shadow: 0 8px 16px var(--shadow-color);
      position: relative;
    }
    .modal-close {
      position: absolute;
      right: 1rem;
      top: 1rem;
      font-size: 1.5rem;
      color: var(--text-color);
      cursor: pointer;
      background: none;
      border: none;
    }

    /* ==== BUTTONS ==== */
    button.primary {
      background-color: var(--accent-color);
      color: #121212;
      border: none;
      padding: 0.6rem 1.2rem;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-weight: 600;
      transition: background-color var(--transition-speed);
    }
    button.primary:hover {
      background-color: var(--accent-hover);
    }

    /* ==== RESPONSIVE ==== */
    @media (max-width: 600px) {
      nav {
        flex-wrap: wrap;
      }
      nav button {
        margin: 0.5rem;
        flex: 1 1 40%;
      }
    }
  </style>
</head>
<body>
  <nav>
    <button class="tab-btn active" data-tab="household-dashboard" aria-selected="true">Household Dashboard</button>
    <button class="tab-btn" data-tab="admin-dashboard" aria-selected="false">Admin Dashboard</button>
    <button class="tab-btn" data-tab="payments-section" aria-selected="false">Payments</button>
    <button class="tab-btn" data-tab="households-section" aria-selected="false">Households</button>
  </nav>

  <main>
    <!-- Household Dashboard Tab -->
    <section id="household-dashboard" class="tab-content" aria-label="Household Dashboard">
      <h1>Household Dashboard</h1>
      <div class="dashboard-grid">
        <!-- Wallet Card -->
        <div class="card wallet-card">
          <h2>Wallet Balance</h2>
          <p class="wallet-balance" id="wallet-balance">R 1,250.00</p>
          <p>Next Due Date: <strong id="next-due-date">2025-08-15</strong></p>
          <p><span class="status-indicator" id="auto-deduction-status"></span> Auto Deduction Enabled</p>
          <button id="open-qr-modal" class="primary" aria-haspopup="dialog">Make Payment (QR)</button>
        </div>

        <!-- Payment History -->
        <div class="card payment-history-card">
          <h2>Payment History</h2>
          <table id="payment-history-table" aria-describedby="payment-history-description">
            <caption id="payment-history-description" class="sr-only">Recent payment transactions</caption>
            <thead>
              <tr>
                <th>Date</th>
                <th>Amount (R)</th>
                <th>Type</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <!-- JS will populate this -->
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- Admin Dashboard Tab -->
    <section id="admin-dashboard" class="tab-content" aria-label="Admin Dashboard" hidden>
      <h1>Admin Dashboard</h1>
      <div class="card">
        <h2>Households List</h2>
        <input type="search" id="admin-household-search" placeholder="Search households..." aria-label="Search households" />
        <table id="admin-households-table">
          <thead>
            <tr>
              <th>Household</th>
              <th>Status</th>
              <th>Wallet Balance</th>
              <th>Last Payment</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <!-- JS generated -->
          </tbody>
        </table>
        <button id="run-auto-deductions" class="primary" style="margin-top:1rem;">Run Auto-Deductions</button>
      </div>
      <div class="card" style="margin-top: 2rem;">
        <h2>Logs</h2>
        <div id="logs" style="height: 150px; overflow-y: auto; background: #2a2a2a; padding: 1rem; border-radius: var(--border-radius); font-size: 0.85rem;"></div>
      </div>
    </section>

    <!-- Payments Section Tab -->
    <section id="payments-section" class="tab-content" aria-label="Payments Section" hidden>
      <h1>Payments</h1>
      <div class="card">
        <h2>Record New Payment</h2>
        <form id="new-payment-form">
          <label for="payment-household">Household:</label><br />
          <select id="payment-household" required>
            <!-- JS populated -->
          </select><br /><br />

          <label for="payment-amount">Amount (R):</label><br />
          <input type="number" id="payment-amount" min="1" step="0.01" required /><br /><br />

          <label for="payment-type">Payment Type:</label><br />
          <select id="payment-type" required>
            <option value="cash">Cash</option>
            <option value="qr">QR Payment</option>
            <option value="voucher">Voucher</option>
            <option value="visa">Visa</option>
          </select><br /><br />

          <button type="submit" class="primary">Submit Payment</button>
        </form>
      </div>
      <div class="card" style="margin-top: 2rem;">
        <h2>Search / Filter Payments</h2>
        <input type="search" id="payment-search" placeholder="Search payments..." aria-label="Search payments" />
        <button id="export-csv" class="primary" style="float:right; margin-bottom: 1rem;">Export to CSV</button>
        <table id="payments-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Household</th>
              <th>Amount (R)</th>
              <th>Type</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody>
            <!-- JS generated -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- Households Section Tab -->
    <section id="households-section" class="tab-content" aria-label="Households Section" hidden>
      <h1>Households</h1>
      <div class="card">
        <h2>Search / Filter Households</h2>
        <input type="search" id="household-search" placeholder="Search households..." aria-label="Search households" />
        <table id="households-table" style="margin-top:1rem;">
          <thead>
            <tr>
              <th>Name</th>
              <th>Status</th>
              <th>Wallet Balance</th>
              <th>Contact</th>
            </tr>
          </thead>
          <tbody>
            <!-- JS generated -->
          </tbody>
        </table>
      </div>
      <div class="card" style="margin-top: 2rem;">
        <h2>Add New Household</h2>
        <form id="add-household-form">
          <label for="new-household-name">Name:</label><br />
          <input type="text" id="new-household-name" required /><br /><br />

          <label for="new-household-contact">Contact Info:</label><br />
          <input type="text" id="new-household-contact" required /><br /><br />

          <label for="new-household-status">Status:</label><br />
          <select id="new-household-status" required>
            <option value="active">Active</option>
            <option value="delinquent">Delinquent</option>
            <option value="deceased">Deceased</option>
          </select><br /><br />

          <label for="new-household-wallet">Initial Wallet Balance (R):</label><br />
          <input type="number" id="new-household-wallet" min="0" step="0.01" required /><br /><br />

          <button type="submit" class="primary">Add Household</button>
        </form>
      </div>
    </section>
  </main>

  <!-- QR Payment Modal -->
  <div class="modal" id="qr-modal" role="dialog" aria-modal="true" aria-labelledby="qr-modal-title" aria-hidden="true">
    <div class="modal-content">
      <button class="modal-close" aria-label="Close QR payment modal">&times;</button>
      <h2 id="qr-modal-title">QR Payment</h2>
      <p>Scan this QR code to pay:</p>
      <div id="qr-code" style="width: 200px; height: 200px; background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%); border-radius: 16px; margin: 1rem auto;"></div>
      <p style="text-align:center; font-style: italic;">(Mock QR Code - for demo only)</p>
    </div>
  </div>

  <script>
    // ========== JavaScript Section Placeholder ==========
    // This is just a placeholder for your JS code.
    // Tab switching, modals, data arrays, event handlers, filters, charts, etc. will go here.

    document.addEventListener('DOMContentLoaded', () => {
      const tabs = document.querySelectorAll('.tab-btn');
      const tabContents = document.querySelectorAll('.tab-content');

      function activateTab(tabName) {
        tabContents.forEach(section => {
          if (section.id === tabName) {
            section.hidden = false;
          } else {
            section.hidden = true;
          }
        });
        tabs.forEach(tab => {
          if (tab.dataset.tab === tabName) {
            tab.classList.add('active');
            tab.setAttribute('aria-selected', 'true');
          } else {
            tab.classList.remove('active');
            tab.setAttribute('aria-selected', 'false');
          }
        });
      }

      tabs.forEach(tab => {
        tab.addEventListener('click', () => activateTab(tab.dataset.tab));
      });

      // Default show household dashboard
      activateTab('household-dashboard');

      // Modal open/close for QR Payment
      const qrModal = document.getElementById('qr-modal');
      const openQrBtn = document.getElementById('open-qr-modal');
      const closeQrBtn = qrModal.querySelector('.modal-close');

      openQrBtn.addEventListener('click', () => {
        qrModal.classList.add('active');
        qrModal.setAttribute('aria-hidden', 'false');
      });

      closeQrBtn.addEventListener('click', () => {
        qrModal.classList.remove('active');
        qrModal.setAttribute('aria-hidden', 'true');
      });

      qrModal.addEventListener('click', e => {
        if (e.target === qrModal) {
          qrModal.classList.remove('active');
          qrModal.setAttribute('aria-hidden', 'true');
        }
      });

      // TODO: Load demo data, populate tables, handle forms, charts, filters...

    });
  </script>
</body>
</html>
